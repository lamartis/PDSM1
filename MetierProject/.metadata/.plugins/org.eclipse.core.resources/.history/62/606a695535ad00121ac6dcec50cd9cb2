package fr.projet26.client;
//http://alvinalexander.com/blog/post/java/how-open-url-read-contents-httpurl-connection-java
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.HttpURLConnection;
import java.net.URL;

import fr.projet26.interfaces.HttpClient;

public class Client implements HttpClient{

	URL url = null;

	public Client(String urlParam) {
		try {
			this.url = new URL(urlParam);
		} catch (Exception e) {}
	}

	public void sendMessage(String message) throws Exception {

		try {
			// create the HttpURLConnection

			HttpURLConnection connection = (HttpURLConnection) url.openConnection();

			connection.setRequestMethod("POST");
			connection.setDoOutput(true);
			connection.connect();

			PrintWriter osw		 	= new PrintWriter(connection.getOutputStream());
			String data				= "message=" + message;


			//*******************Envoi d'informations à la servelt***************************
			osw.write(data);
			osw.flush();
			osw.close();	

			new BufferedReader(new InputStreamReader(connection.getInputStream()));
		}
		catch (Exception e)
		{
			e.printStackTrace();
			throw e;
		}
	}


}